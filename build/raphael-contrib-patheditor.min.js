/*! raphael-contrib-patheditor 2013-08-26 */
!function(){var a=function(a,b){this.editor=a,this.legend=b};a.prototype={doCreateNewCommand:function(){},setChangeListener:function(){}},Raphael.el.installPathEditor=function(d){if(d=d?d:{},this.type&&"path"==this.type&&this.attr("path")){for(var e=Raphael.parsePathString(this.attr("path")),f={pathObject:e,shape:this,commandEditors:d.commandEditors?d.commandEditors:b,dragThrottle:d.dragThrottle?dragThrottle:80},g=this.paper.set(),h=this.paper.set(),i=0;i<e.length;i++){var j=e[i];c(f,j)}var k=10;for(var i in f.commandEditors)paper.circle(10,k,5).attr({fill:f.commandEditors[i].bgColor}),paper.text(30,k,f.commandEditors[i].description).attr({"text-anchor":"start"}),k+=25;var l=new a(g,h);return this.__editorCtx=l,l}};var b={L:{bgColor:"#ededed",textColor:"black",name:"L",description:"line to"},M:{bgColor:"#111111",textColor:"white",name:"M",description:"move to"},H:{bgColor:"#ff1111",textColor:"yellow",name:"H",description:"horizontal line to"},V:{bgColor:"#ffff11",textColor:"yellow",name:"V",description:"vertical line to"},C:{bgColor:"#55ee55",textColor:"black",name:"C",description:"curve to"},S:{bgColor:"#1111ff",textColor:"black",name:"S",description:"smooth curve to"},Q:{bgColor:"orange",textColor:"black",name:"Q",description:"quadratic BÃ©zier curve to"}},c=function(a,b){return!b||b.length<1?void 0:"L"==b[0]&&3==b.length?d(a,b):"M"==b[0]&&3==b.length?e(a,b):"H"==b[0]&&2==b.length?f(a,b):"V"==b[0]&&2==b.length?g(a,b):"C"==b[0]&&7==b.length?h(a,b):"S"==b[0]&&5==b.length?i(a,b):"Q"==b[0]&&5==b.length?buildQCurveToCmdEditor(a,b):void 0},d=function(a,b){var c=a.shape.paper,d=c.circle(b[1],b[2],5).attr({fill:a.commandEditors.L.bgColor}),e={pathObject:a.pathObject,shape:a.shape,feedback:d,cmd:b};return d.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[1]=c,this.cmd[2]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},e,e,e),d},e=function(a,b){var c=a.shape.paper,d=c.circle(b[1],b[2],5).attr({fill:a.commandEditors.M.bgColor}),e={pathObject:a.pathObject,shape:a.shape,feedback:d,cmd:b};return d.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[1]=c,this.cmd[2]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},e,e,e),d},f=function(a,b){var c=a.shape.paper,d=c.circle(b[1],50,5).attr({fill:a.commandEditors.H.bgColor}),e={pathObject:a.pathObject,shape:a.shape,feedback:d,cmd:b};return d.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[1]=c,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},e,e,e),d},g=function(a,b){var c=a.shape.paper,d=c.circle(50,b[1],5).attr({fill:a.commandEditors.V.bgColor}),e={pathObject:a.pathObject,shape:a.shape,feedback:d,cmd:b};return d.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[1]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},e,e,e),d},h=function(a,b){var c=a.shape.paper,d=c.set(),e=c.circle(b[1],b[2],5).attr({fill:a.commandEditors.C.bgColor}),f={pathObject:a.pathObject,shape:a.shape,feedback:e,cmd:b};e.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[1]=c,this.cmd[2]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},f,f,f),d.push(e);var g=c.circle(b[3],b[4],5).attr({fill:a.commandEditors.C.bgColor}),h={pathObject:a.pathObject,shape:a.shape,feedback:g,cmd:b};g.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[3]=c,this.cmd[4]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},h,h,h),d.push(g);var i=c.circle(b[5],b[6],5).attr({fill:a.commandEditors.C.bgColor}),k={pathObject:a.pathObject,shape:a.shape,feedback:i,cmd:b};return i.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[5]=c,this.cmd[6]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},k,k,k),d.push(i),d},i=function(a,b){var c=a.shape.paper,d=c.set(),e=c.circle(b[1],b[2],5).attr({fill:a.commandEditors.S.bgColor}),f={pathObject:a.pathObject,shape:a.shape,feedback:e,cmd:b};e.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[1]=c,this.cmd[2]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},f,f,f),d.push(e);var g=c.circle(b[3],b[4],5).attr({fill:a.commandEditors.S.bgColor}),h={pathObject:a.pathObject,shape:a.shape,feedback:g,cmd:b};return g.drag(j(a.dragThrottle,function(a,b){var c=this.ox+a,d=this.oy+b;this.cmd[3]=c,this.cmd[4]=d,this.feedback.attr({cx:c,cy:d}),this.shape.attr({path:this.pathObject})}),function(){this.ox=this.feedback.attr("cx"),this.oy=this.feedback.attr("cy")},function(){},h,h,h),d.push(g),d},j=function(a,b,c,d){function e(){function e(){g=+new Date,c.apply(i,k)}function h(){f=void 0}var i=this,j=+new Date-g,k=arguments;d&&!f&&e(),f&&clearTimeout(f),void 0===d&&j>a?e():b!==!0&&(f=setTimeout(d?h:e,void 0===d?a-j:a))}var f,g=0;return"boolean"!=typeof b&&(d=c,c=b,b=void 0),e}}();